<!DOCTYPE html><html><head>
	<title>pecan.ICo – pecan manual</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="css/style.css" media="all">
</head><body>
	<header><a href="index.html"><h1>pecan</h1></a></header>
	<nav id="menu"><ul><li><a href="index.html">Introduction</a></li><ul><li><a href="intro-installation.html">Installation</a></li></ul><ul><li><a href="intro-start.html">Getting started</a></li></ul></ul><ul><li><a href="features.html">Features</a></li><ul><li><a href="features-declaration.html">Declaration</a></li></ul><ul><li><a href="features-invoking.html">Invoking</a></li></ul><ul><li><a href="features-suspending.html">Suspending calls</a></li></ul><ul><li><a href="features-io.html">Input and output</a></li></ul><ul><li><a href="features-labels.html">Labels</a></li></ul><ul><li><a href="features-states.html">States</a></li></ul></ul><ul><li><a href="api.html">API</a></li><ul><li><a href="api-pecan-ico.html">pecan.ICo</a></li></ul><ul><li><a href="api-pecan-cotools.html">pecan.CoTools</a></li></ul></ul><ul><li><a href="implementation.html">Implementation details</a></li><ul><li><a href="overview.html">Overview</a></li></ul><ul><li><a href="implementation-types.html">Type system</a></li></ul><ul><li><a href="history.html">History</a></li></ul></ul></nav>
	<main><h2><code>pecan.ICo&lt;...&gt;</code></h2><p><code>pecan.ICo&lt;TIn, TOut, TRet&gt;</code> is the interface of a coroutine.</p>
<p>The type parameter <code>TIn</code> represents values that the coroutine can <code>accept()</code>, <code>TOut</code> represents values that the coroutine can <code>yield(...)</code>, and <code>TRet</code> represents the return value.</p>
<h3 id="state"><code>public var state(get, never):pecan.CoState</code></h3><p>Current state of the coroutine.</p>
<ul>
<li><code>Ready</code> - ready to execute actions, can be invoked to run with <code>tick</code>.</li>
<li><code>Suspended</code> - (temporarily) suspended, may wake up later to become <code>Ready</code>.</li>
<li><code>Terminated</code> - no more actions will be executed.</li>
<li><code>Accepting</code> - waiting for a value of type <code>TIn</code>, can be provided with <code>give</code>.</li>
<li><code>Yielding</code> - ready to give a value of type <code>TOut</code>, can be accepted with <code>take</code>.</li>
</ul>
<h3 id="returned"><code>public var returned(get, never):Null&lt;TRet&gt;</code></h3><p>Value returned by the coroutine, if available. <code>null</code> otherwise.</p>
<h3><code>public var onHalt:()-&gt;Void</code></h3><p>Callback invoked when the coroutine terminates in any manner. This field should never be set to <code>null</code>.</p>
<p>Note that adding a callback after a coroutine has finished has no effect. This may be important for coroutines that do not suspend at all between their invocation and their termination. The callback can be set after a <code>runSuspended(...)</code> call to avoid this problem.</p>
<h3 id="tick"><code>public function tick():Void</code></h3><p>Moves the coroutine forward until a suspend point is hit, but only if it was in a <code>Ready</code> state to begin with. Does nothing otherwise.</p>
<h3 id="suspend"><code>public function suspend():Void</code></h3><p>Suspends the coroutine, stopping its execution, and changes its state to <code>Suspended</code>.</p>
<h3 id="wakeup"><code>public function wakeup():Void</code></h3><p>Wakes up and <code>tick</code>s a coroutine from a <code>Ready</code> or <code>Suspended</code> state.</p>
<h3 id="terminate"><code>public function terminate():Void</code></h3><p>Terminates the coroutine, stopping its execution, and changes its state to <code>Terminated</code>. A terminated coroutine may not be woken up again.</p>
<h3 id="give"><code>public function give(value:TIn):Void</code></h3><p>Gives a value to a coroutine in an <code>Accepting</code> state. This should be called when a coroutine expects a value from an <code>accept()</code> call. The coroutine is <code>tick</code>ed beforehand.</p>
<h3 id="take"><code>public function take():TOut</code></h3><p>Takes a value from a coroutine in a <code>Yielding</code> state. This should be called when a coroutine is providing a value using a <code>yield(...)</code> call. The coroutine is <code>tick</code>ed beforehand.</p>
<h3 id="goto"><code>public function goto(label:String):Void</code></h3><p>Goes to a label defined in the coroutine with a <code>label(&quot;...&quot;)</code> point, then <code>tick</code>. Throws an exception if the label does not exist.</p>
</main>
	<a id="page-prev" href="api.html">« Previous: API</a>
	<a id="page-next" href="api-pecan-cotools.html">Next: pecan.CoTools »</a>
	<footer>
		<a href="https://github.com/Aurel300/pecan/blob/gh-pages-src/content/03-api.md">Contribute to this page</a>
		| <a href="https://github.com/Aurel300/pecan/" target="_blank"><code>pecan</code> on GitHub</a>
		| &copy; 2019-2021 Aurel Bílý
	</footer>
</body></html>